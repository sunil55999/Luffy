‚ùå Current Problems to Fix:
1. üîó Messages with URLs do not show webpage previews
Even when the message contains a previewable link (like https://tradingview.com/...), the bot sends it as plain text.

‚úÖ Expected behavior:

URLs should display webpage previews by setting disable_web_page_preview=False.

Message text and formatting must be preserved using entities or HTML.

Example fix:

python
Copy
Edit
await bot.send_message(
    chat_id=DEST_CHAT_ID,
    text=event.text,
    entities=event.entities,
    disable_web_page_preview=False
)
2. üö´ Block Word Function not working
I have a feature to block certain words (e.g., "promo", "join", "contact").

The bot should skip forwarding if the message text contains any blocked word (case-insensitive, partial matches included).

‚úÖ Expected behavior:

A function like is_blocked_word(text) should return True/False.

It should check against a global blocklist and apply to all pairs.

Example logic:

python
Copy
Edit
BLOCKED_WORDS = ["join", "promo", "subscribe"]

def is_blocked_word(text):
    return any(word.lower() in text.lower() for word in BLOCKED_WORDS)
3. üñºÔ∏è Block Image by pHash not working
Images are downloaded, but even exact duplicates (spam banners) are not blocked.

I want to generate the perceptual hash (pHash) of every image and skip it if the hash matches any in a global blocked list.

‚úÖ Expected behavior:

When an image is received, compute its pHash using imagehash (or similar).

Compare it to a list of blocked hashes.

If match found, skip forwarding.

Example logic:

python
Copy
Edit
import imagehash
from PIL import Image

BLOCKED_HASHES = ["abc123...", "def456..."]

def is_blocked_image(file_path):
    img = Image.open(file_path)
    phash = str(imagehash.phash(img))
    return phash in BLOCKED_HASHES
üìå Additional Requirements:
Implement is_blocked_word() and is_blocked_image() functions

These functions should be used globally across all forwarding pairs

Maintain clean and safe file handling for image checks

Make the filters work whether the message is:

A plain text

A media file (photo/doc/video) with or without a caption

‚úÖ Please generate a clean, reliable forward_message() function that:

Skips messages that match is_blocked_word() or is_blocked_image()

Shows previews for links (disable_web_page_preview=False)

Sends text and media with proper formatting

Uses the Bot API for everything (no user-forwarded messages)

Works across all source-destination forwarding pairs